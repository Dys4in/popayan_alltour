{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hoteles</title>
    <link rel="stylesheet" href="{% static 'css/sitios_de_interes/hoteles.css' %}">
    <script src="{% static 'js/sitios_de_interes/hoteles.js' %}"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.4.0/css/all.css">
    <link rel="shortcut icon" href="../static/img/imagen_2025-03-16_185953883-removebg-preview.png" type="image/x-icon">
    <style>
        /* ✅ Estilos para el badge de "Tu Establecimiento" */
        .owner-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            z-index: 10;
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
            display: flex;
            align-items: center;
            gap: 6px;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {

            0%,
            100% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }
        }

        .owner-badge i {
            font-size: 1rem;
        }

        /* Highlight sutil para establecimientos del empresario */
        .hotel-layout.owner-establishment {
            position: relative;
            border: 2px solid #667eea;
            border-radius: 10px;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.15);
        }

        /* Efecto de scroll suave */
        html {
            scroll-behavior: smooth;
        }

        /* Animación al hacer scroll a un establecimiento */
        .hotel-layout:target {
            animation: highlight 2s ease;
        }

        @keyframes highlight {
            0% {
                background-color: rgba(102, 126, 234, 0.1);
            }

            50% {
                background-color: rgba(102, 126, 234, 0.2);
            }

            100% {
                background-color: transparent;
            }
        }
    </style>
</head>

<body>
    <div class="hero-container">
        <nav class="navbar" id="navbar">
            <a href="#" class="logo-nav">
                <img src="{% static 'img/home/logo.png' %}" alt="Popayán Tour Logo">
            </a>
            <ul class="nav-menu" id="nav-menu">
                <li><a href="{% url 'home' %}">Inicio</a></li>
                <li><a href="{% url 'semanaSanta' %}">Semana santa</a></li>
                <li><a href="{% url 'listar_hoteles' %}">Sitios de interés</a></li>
                <li><a href="{% url 'historia_1537' %}">Historia</a></li>
                <li><a href="{% url 'entretenimiento' %}">Entretenimiento</a></li>
            </ul>
            <div class="nav-actions">
                <div class="nav-icons">
                    {% if request.user.is_authenticated %}
                    <!-- Usuario autenticado: redirige al perfil -->
                    <a href="{% url 'perfilUser' %}" class="nav-icon" title="Mi perfil">
                        <i class="fas fa-user"></i>
                    </a>
                    {% else %}
                    <!-- Usuario invitado: redirige al login -->
                    <a href="{% url 'login' %}" class="nav-icon" title="Iniciar sesión">
                        <i class="fas fa-user"></i>
                    </a>
                    {% endif %}
                </div>
                <div class="hamburger" id="hamburger">
                    <i class="fas fa-bars"></i>
                </div>
            </div>
        </nav>
    </div>

    <!-- fin nav -->
    <!-- Hero Section -->
    <div class="hero-container1">
        <h1 class="hero-title">HOTELES</h1>

        <div class="navigation-buttons">
            <a href="#hoteles" class="nav-button active" onclick="setActive(this)">HOTELES</a>
            <a href="{% url 'listar_restaurantes' %}" class="nav-button">RESTAURANTES</a>
            <a href="{% url 'listar_museos' %}" class="nav-button" onclick="setActive(this)">MUSEOS</a>
            <a href="{% url 'listar_iglesias' %}" class="nav-button" onclick="setActive(this)">IGLESIAS</a>
        </div>
    </div>

    <!-- Mensajes -->
    {% if messages %}
    <div style="max-width: 1200px; margin: 0 auto; padding: 0 20px;">
        {% for message in messages %}
        <div
            style="padding: 10px; margin: 10px 0; border-radius: 5px; {% if message.tags == 'success' %}background: #d4edda; color: #155724;{% else %}background: #f8d7da; color: #721c24;{% endif %}">
            {{ message }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <!-- Inicio cards -->
    <div class="padre">
        {% for hotel in establecimientos %}
        <!-- ✅ IMPORTANTE: Agregar ID único para cada establecimiento -->
        <div class="hotel-layout {% if request.user.is_authenticated and hotel.empresario.id == request.user.id %}owner-establishment{% endif %}"
            id="establecimiento-{{ hotel.id }}">

            <!-- ✅ Badge para mostrar "Tu Establecimiento" si el usuario logueado es el dueño -->
            {% if request.user.is_authenticated and hotel.empresario.id == request.user.id %}
            <div class="owner-badge">
                <i class="fas fa-crown"></i>
                <span>Tu Establecimiento</span>
            </div>
            {% endif %}

            <!-- Sección de Información -->
            <div class="info-section">
                <h1 class="hotel-title">{{ hotel.nombre }}</h1>

                <p class="hotel-description">
                    {{ hotel.descripcion }}
                </p>

                <div class="divider"></div>

                <div class="details-grid">
                    <!-- Horario -->
                    <div class="detail-item">
                        <h3>Horario:</h3>
                        <div class="detail-content">
                            <p>{{ hotel.horario_aten }}</p>
                        </div>
                    </div>

                    <div class="detail-item">
                        <h3>Dirección:</h3>
                        <div class="detail-content">
                            <p>{{ hotel.direccion }}</p>
                        </div>
                    </div>

                    <!-- Métodos de pago -->
                    <div class="detail-item">
                        <h3>Métodos de pago:</h3>
                        <div class="payment-icons">
                            <div class="payment-icon mastercard">$</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sección de Imágenes -->
            <div class="images-section">
                <div class="image-box image-medium">
                    {% if hotel.imagen %}
                    <img src="{{ hotel.get_imagen_url }}" alt="{{ hotel.nombre }}">
                    {% else %}
                    <img src="{% static 'img/default.jpg' %}" alt="Sin imagen">
                    {% endif %}
                </div>

                <!-- Botón Saber más -->
                <div class="btn-container">
                    <!-- El botón ya está correcto en tu código -->
                    <a href="{% url 'registrar_visita' tipo='hotel' id=hotel.id %}" target="_blank" class="btn-ver">Ver
                        más</a>
                    <!-- Solo empresarios o staff -->
                    {% if puede_gestionar and request.user.is_authenticated and hotel.empresario.id == request.user.id%}
                    <div style="margin-top: 10px; display: flex; gap: 10px;">
                        <a href="{% url 'editar_establecimiento' tipo=tipo id=hotel.id %}" class="btn-editar">
                            <i class="fas fa-edit"></i> Editar
                        </a>
                        <button type="button" class="btn-eliminar delete-trigger" data-id="{{ hotel.id }}"
                            data-name="{{ hotel.nombre }}" data-tipo="{{ tipo }}"
                            style="border: none; cursor: pointer;">
                            <i class="fas fa-trash"></i> Eliminar
                        </button>
                    </div>
                    {% endif %}
                </div>
            </div>
        </div>
        {% empty %}
        <div style="text-align: center; padding: 50px; width: 100%;">
            <h3>No hay {{ tipo }}s disponibles</h3>
            <p>Aún no se han agregado {{ tipo }}s.</p>
        </div>
        {% endfor %}
    </div>

    <br><br><br>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">

            <!-- Logo primero -->
            <div class="logo-section">
                <div class="logo-footer">
                    <img src="{% static 'img/home/logo_blanco.png' %}" alt="Logo Popayán Tour">
                </div>
                <div class="linea-horizontal"></div>
            </div>

            <!-- Contenido del footer -->
            <div class="footer-grid">
                <div class="footer-section">
                    <h3>Acerca de</h3>
                    <ul>
                        <li><a href="#">¿Quiénes somos?</a></li>
                        <li><a href="{% url 'terminos' %}">Términos y condiciones</a></li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Contacto</h3>
                    <ul>
                        <li>Correo: <br>popayanalltour</li>
                        <li>Línea gratuita: <br> 312 231 1230</li>
                    </ul>
                </div>

                <div class="footer-section">
                    <h3>Redes Sociales</h3>
                    <ul class="social-icons">
                        <li><i class="fab fa-instagram"></i>
                            <a href="https://www.instagram.com/popayanalltour/">@PopayanAllTour</a>
                        </li>
                        <li><i class="fab fa-facebook"></i>
                            <a
                                href="https://www.facebook.com/profile.php?id=61578069024241&mibextid=wwXIfr&mibextid=wwXIfr">Popayan
                                AllTour</a>
                        </li>
                        <li><i class="fab fa-youtube"></i> @popayanAlltour5002</li>
                    </ul>
                </div>
            </div>

            <!-- Derechos -->
            <div class="footer-bottom">
                <p>&copy; PopayanAllTour | Todos los derechos reservados</p>
            </div>
        </div>
    </footer>

    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
</body>

</html>